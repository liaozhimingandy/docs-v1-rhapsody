<!doctype html>
<html>
 <head> 
  <title>Managing Web Service User Stores</title> 
  <link rel="stylesheet" href="styles/site.css" type="text/css"> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
  <link rel="stylesheet" href="styles/icons.css" type="text/css">
  <script src="js/jquery.min.js"></script>
  <script src="tree/collapsibleTreeMenu.js"></script>
  <link href="tree/collapsibleTreeMenu.css" rel="stylesheet" type="text/css">
 </head> 
 <body class="theme-default aui-theme-default"> 
  <div id="page"> 
   <div id="main" class="aui-page-panel"> 
    <div id="main-header"> 
     <div id="breadcrumb-section"> 
      <ol id="breadcrumbs">  
       <li> <span><a href="Rhapsody-Integration-Engine-6.5_133160975.html">Rhapsody Integration Engine 6.5</a></span> </li> 
       <li> <span><a href="Developing-Rhapsody_133161055.html">Developing Rhapsody</a></span> </li> 
       <li> <span><a href="Rhapsody-Objects_133161790.html">Rhapsody Objects</a></span> </li> 
       <li> <span><a href="Web-Services_133163490.html">Web Services</a></span> </li> 
      </ol> 
     </div> 
     <h1 id="title-heading" class="pagetitle"> <span id="title-text">Managing Web Service User Stores</span> </h1> 
    </div> 
    <div id="content" class="view">  
     <div id="main-content" class="wiki-content group"> 
      <p>Web service authentication is controlled using a Web Service User Store. A Web Service User Store is a list of users that can call a Web service hosted by Rhapsody. Each user has a username, a password and a number of certificates.</p>
      <p>Every Web service can independently define which users are permitted access. The Web Service User Store is independent of the main Rhapsody user store.</p>
      <h2 id="ManagingWebServiceUserStores-AddingaUser">Adding a User</h2>
      <p>To add a user to the Web service user store:</p>
      <ol>
       <li>Navigate to <strong>View&gt;Web Services</strong>. The <strong>Web Services</strong>&nbsp;dialog is displayed.</li>
       <li><p>Select the <strong>Edit Users</strong> icon. The <strong>Web Services User Store</strong> dialog is displayed:</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="545" src="attachments/133163497/133163502.png" data-image-src="attachments/133163497/133163502.png" data-unresolved-comment-count="0" data-linked-resource-id="133163502" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="WebServiceUserStore.png" data-base-url="https://docs.rhapsody.health" data-linked-resource-content-type="image/png" data-linked-resource-container-id="133163497" data-linked-resource-container-version="3"></span></p></li>
       <li><p>On the <strong>Web Services User Store</strong> dialog, in the <strong>Password storage mechanism </strong>field, indicate whether you want the user store to store hashed or encrypted passwords.</p>
        <div class="confluence-information-macro confluence-information-macro-warning">
         <span class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon"></span>
         <div class="confluence-information-macro-body">
          <p>If this field is changed and one or more users currently have passwords, a warning will be displayed. If converting from encryption to hashes, the warning indicates that this is a one-way conversion. If converting from hashes to encryption, the warning indicates that the conversion will delete all existing passwords (as there is no way to recover them to perform the conversion).</p>
         </div>
        </div>
        <ul>
         <li><strong>Encrypted passwords</strong> - Rhapsody can decrypt the passwords to retrieve the plain text passwords.</li>
         <li><strong>Hashed passwords</strong> - Rhapsody can never retrieve the plain text passwords.</li>
        </ul></li>
       <li><p>Select the <strong>Add</strong> icon. The <strong>Add New User</strong>&nbsp;dialog is displayed:</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/133163497/133163501.png" data-image-src="attachments/133163497/133163501.png" data-unresolved-comment-count="0" data-linked-resource-id="133163501" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="AddNewUser.png" data-base-url="https://docs.rhapsody.health" data-linked-resource-content-type="image/png" data-linked-resource-container-id="133163497" data-linked-resource-container-version="3"></span></p></li>
       <li><p>Enter the following details:</p>
        <div class="table-wrap">
         <table class="wrapped confluenceTable">
          <tbody>
           <tr>
            <th class="confluenceTh"><p>Field</p></th>
            <th class="confluenceTh"><p>Description</p></th>
           </tr>
           <tr>
            <td class="confluenceTd"><p>Username</p></td>
            <td class="confluenceTd"><p><em>Required.</em> The username must have at least one character, and may only use characters defined as <em>NameChar</em> in Section 2.3 of the XML specification. This effectively limits it to Unicode letters, digits and a few special characters including <code>:</code>, <code>_</code>, <code>-</code> and <code>.</code></p></td>
           </tr>
           <tr>
            <td class="confluenceTd"><p>Use Rhapsody variable for password</p></td>
            <td class="confluenceTd"><p><em>Optional.</em> Select this checkbox if you want to use a Rhapsody variable for the user's password.</p></td>
           </tr>
           <tr>
            <td class="confluenceTd"><p>Password</p></td>
            <td class="confluenceTd"><p><em>Optional.</em> If you selected the <strong>Use Rhapsody variable for password</strong> checkbox, click the <strong>Select Variable</strong> link to select a variable. Otherwise, enter the password you want to use for the user. <br class="atl-forced-newline"> Although optional, the password is required if the user calls a Web service that performs UsernameToken authentication. As passwords are set by the administrator, rather than the user, there is no password policy in place.</p></td>
           </tr>
           <tr>
            <td class="confluenceTd"><p>Confirm Password</p></td>
            <td class="confluenceTd"><p><em>Optional.</em> If you entered a password in the <strong>Password</strong> field, reenter the password to confirm it. <br class="atl-forced-newline"> This field is not available if you selected the <strong>Use Rhapsody variable for password</strong> checkbox.</p></td>
           </tr>
          </tbody>
         </table>
        </div></li>
       <li>Select the <strong>OK</strong> button to add the user to the Web service user store. This applies all the changes to the engine immediately.</li>
      </ol>
      <h2 id="ManagingWebServiceUserStores-AssociatingCertificates">Associating Certificates</h2>
      <p>You may use X509 certificates when calling a Web service. Certificates are optional, but are required if:</p>
      <ul>
       <li>Authentication is carried out using X509 tokens.</li>
       <li>Asymmetric security bindings are in use, and the incoming requests use a reference to the certificate, rather than including it as a binary security token.</li>
      </ul>
      <p>The following certificates are accepted as the issuers of the client certificates:</p>
      <ul>
       <li>The certificate corresponding to the web service private key.</li>
       <li>The configured client certificates (self-signed certificates).</li>
       <li>Certificates imported into Rhapsody with a subject name matching the issuer name of the client certificate (it is located automatically&nbsp;as long as the issuer certificate has been imported into Rhapsody).</li>
      </ul>
      <p>To associate a user with a certificate:</p>
      <ol>
       <li>Navigate to <strong>View&gt;Web Services</strong>.</li>
       <li>On the <strong>Web Services</strong>&nbsp;dialog, select the <strong>Edit Users</strong> icon.</li>
       <li><p>On the <strong>Web Services User Store</strong> dialog, select a user, then select the <strong>Edit Certificates</strong> icon. The <strong>Select Certificates</strong>&nbsp;dialog is displayed:</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/133163497/133163500.png" data-image-src="attachments/133163497/133163500.png" data-unresolved-comment-count="0" data-linked-resource-id="133163500" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="SelectCertificates.png" data-base-url="https://docs.rhapsody.health" data-linked-resource-content-type="image/png" data-linked-resource-container-id="133163497" data-linked-resource-container-version="3"></span></p></li>
       <li>Select the certificates you want to use to authenticate this user, then select the <strong>OK</strong> button.</li>
       <li>Select the <strong>OK</strong> button on the <strong>Web Services User Store</strong> dialog to apply all the changes to the engine immediately.</li>
      </ol>
      <p>In the case of&nbsp;self-signed certificates, where issuer is the same as the subject, it is sufficient to import the certificate into Rhapsody using the <a href="Managing-Certificates-and-Keys_133161222.html">Certificate and Key Manager</a>. However, for two way SSL authentication in Rhapsody, the setup for non-self-signed user certificates is as follows:</p>
      <ol>
       <li>Import the CA certificate that issued client certificate&nbsp;for SSL handshake.</li>
       <li>Import the web service user leaf certificate&nbsp;for user authentication.</li>
       <li>For end user certification to work, ensure the associated private key is included.</li>
      </ol>
      <p><span style="color: rgb(0,0,0);font-size: 20.0px;">Deleting a User</span></p>
      <p>To delete a user from the Web service user store:</p>
      <ol>
       <li>Navigate to <strong>View&gt;Web Services</strong>.</li>
       <li>On the <strong>Web Services</strong>&nbsp;dialog, select the <strong>Edit Users</strong> icon.</li>
       <li>On the <strong>Web Services User Store</strong>&nbsp;dialog, select the <strong>Delete</strong> icon.</li>
       <li>Select the <strong>OK</strong> button to confirm that you want to delete the user.</li>
       <li>Select the <strong>OK</strong> button on the <strong>Web Services User Store</strong>&nbsp;dialog to apply all the changes to the engine immediately.</li>
      </ol>
      <h2 id="ManagingWebServiceUserStores-ImportingaWebServiceUserStore">Importing a Web Service User Store</h2>
      <p>To import a Web service user store:</p>
      <ol>
       <li>Navigate to <strong>View&gt;Web Services</strong>.</li>
       <li>On the <strong>Web Services</strong> dialog, select the <strong>Edit Users</strong> icon.</li>
       <li><p>On the <strong>Web Services User Store</strong> dialog, select the <strong>Import</strong> icon. The <strong>Import Web Services User Store</strong> dialog is displayed:</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/133163497/133163499.png" data-image-src="attachments/133163497/133163499.png" data-unresolved-comment-count="0" data-linked-resource-id="133163499" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="ImportWebServicesUserStore.png" data-base-url="https://docs.rhapsody.health" data-linked-resource-content-type="image/png" data-linked-resource-container-id="133163497" data-linked-resource-container-version="3"></span></p></li>
       <li>Click the <strong>Browse</strong> link to locate the user store you want to import.</li>
       <li>Enter the <strong>password</strong> to decrypt the file.</li>
       <li>Select the <strong>Import</strong> button. If the import is successful, Rhapsody displays a confirmation message.</li>
       <li>Select the <strong>OK</strong> button on the <strong>Web Services User Store</strong> dialog to apply all the changes to the engine immediately.</li>
      </ol>
      <h2 id="ManagingWebServiceUserStores-ExportingaWebServiceUserStore">Exporting a Web Service User Store</h2>
      <p>To export a Web service user store:</p>
      <ol>
       <li>Navigate to <strong>View&gt;Web Services</strong>.</li>
       <li>On the <strong>Web Services</strong> dialog, select the <strong>Edit Users</strong> icon.</li>
       <li><p>On the <strong>Web Services User Store</strong> dialog, select the <strong>Export</strong> icon. The <strong>Export Web Services User Store</strong> dialog is displayed:</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/133163497/133163498.png" data-image-src="attachments/133163497/133163498.png" data-unresolved-comment-count="0" data-linked-resource-id="133163498" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="ExportWebServicesUserStore.png" data-base-url="https://docs.rhapsody.health" data-linked-resource-content-type="image/png" data-linked-resource-container-id="133163497" data-linked-resource-container-version="3"></span></p></li>
       <li>Click the <strong>Browse</strong> link to select the location to which you want to export the user store and enter a filename.</li>
       <li>Enter a <strong>password</strong> to encrypt the file.</li>
       <li>Confirm the password, then select the <strong>Export</strong> button. If the export is successful, Rhapsody displays a confirmation message.</li>
      </ol>
      <p> </p> 
     </div>  
    </div> 
   </div>  
  </div>   
 </body>
</html>