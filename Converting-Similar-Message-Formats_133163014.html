<!doctype html>
<html>
 <head> 
  <title>Converting Similar Message Formats</title> 
  <link rel="stylesheet" href="styles/site.css" type="text/css"> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
  <link rel="stylesheet" href="styles/icons.css" type="text/css">
  <script src="js/jquery.min.js"></script>
  <script src="tree/collapsibleTreeMenu.js"></script>
  <link href="tree/collapsibleTreeMenu.css" rel="stylesheet" type="text/css">
 </head> 
 <body class="theme-default aui-theme-default"> 
  <div id="page"> 
   <div id="main" class="aui-page-panel"> 
    <div id="main-header"> 
     <div id="breadcrumb-section"> 
      <ol id="breadcrumbs">  
       <li> <span><a href="Rhapsody-Integration-Engine-6.5_133160975.html">Rhapsody Integration Engine 6.5</a></span> </li> 
       <li> <span><a href="Developing-Rhapsody_133161055.html">Developing Rhapsody</a></span> </li> 
       <li> <span><a href="Rhapsody-Objects_133161790.html">Rhapsody Objects</a></span> </li> 
       <li> <span><a href="Rhapsody-Components_133161994.html">Rhapsody Components</a></span> </li> 
       <li> <span><a href="Filters_133162681.html">Filters</a></span> </li> 
       <li> <span><a href="Filter-Types_133162712.html">Filter Types</a></span> </li> 
       <li> <span><a href="Mapper_133163007.html">Mapper</a></span> </li> 
       <li> <span><a href="Using-the-Mapper-Filter_133163013.html">Using the Mapper Filter</a></span> </li> 
      </ol> 
     </div> 
     <h1 id="title-heading" class="pagetitle"> <span id="title-text">Converting Similar Message Formats</span> </h1> 
    </div> 
    <div id="content" class="view">  
     <div id="main-content" class="wiki-content group"> 
      <p>This scenario involves creating a custom mapper definition to convert two similar EDI messages, then using it in the Mapper filter.</p>
      <p>The following screenshot&nbsp;illustrates a simple route:</p>
      <p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/133163014/133163015.png" data-image-src="attachments/133163014/133163015.png" data-unresolved-comment-count="0" data-linked-resource-id="133163015" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="MapperRoute.PNG" data-base-url="https://docs.rhapsody.health" data-linked-resource-content-type="image/png" data-linked-resource-container-id="133163014" data-linked-resource-container-version="1"></span></p>
      <h2 id="ConvertingSimilarMessageFormats-CreatingtheMapperDefinition">Creating the Mapper Definition</h2>
      <p>To use the Mapper filter, you must define a Mapping Definition, which specifies how the fields from the input message should be mapped to the output message. The <strong>Map Designer</strong> is used to build the Mapping Definition.</p>
      <p>To launch the Map Designer, select <strong>Tools&gt;Map Designer</strong>. The Map Designer is then started, and the <strong>New Project</strong> wizard is displayed.</p>
      <div class="confluence-information-macro confluence-information-macro-note">
       <span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span>
       <div class="confluence-information-macro-body">
        <p>If the <strong>New Project</strong> wizard is not displayed, select <strong>File&gt;New Mapping Project</strong> or press <code>Ctrl + N</code> to launch the <strong>New Project</strong> wizard.</p>
       </div>
      </div>
      <div id="expander-678859540" class="expand-container">
       <div id="expander-control-678859540" class="expand-control">
        <span class="expand-control-icon"><img style="vertical-align:middle;" class="expand-control-image" src="images/icons/grey_arrow_down.png"></span>
        <span class="expand-control-text">Creating a Mapping Definition</span>
       </div>
       <div id="expander-content-678859540" class="expand-content">
        <p></p>
        <div class="panel" style="border-width: 1px;">
         <div class="panelHeader" style="border-bottom-width: 1px;">
          <b>Creating a Mapping Definition</b>
         </div>
         <div class="panelContent"> 
          <ol>
           <li>On the <strong>New</strong> tab of the <strong>New Project</strong> screen, enter the following details and then select the <strong>Create</strong> button.
            <ol>
             <li>Enter a name for the mapping definition.</li>
             <li>Enter the location where you want to save the mapping definition.</li>
            </ol></li>
           <li><p>The <strong>Mapping Wizard</strong> dialog is displayed:</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/133163411/133163414.png" data-image-src="attachments/133163411/133163414.png" data-unresolved-comment-count="0" data-linked-resource-id="133163414" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="MappingWizard.png" data-base-url="https://docs.rhapsody.health" data-linked-resource-content-type="image/png" data-linked-resource-container-id="133163411" data-linked-resource-container-version="1"></span></p></li>
           <li>A mapping definition requires Input and Output message definitions:
            <ol>
             <li>The <strong>Input Definition</strong> is the file that holds the object definition that is to be the source of the mapping; that is, the object to be mapped from.</li>
             <li><p>The <strong>Output Definition</strong> is the file that holds the object definition that is to be created; that is, the object to be mapped to.</p>
              <div class="confluence-information-macro confluence-information-macro-note">
               <span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span>
               <div class="confluence-information-macro-body">
                <p>A single file may be specified for both definitions; for example, to map an input message to a different output message type (ADTA02 to ADTA011). In this example, we are mapping messages from HL7 v2.4 to HL7 v2.5</p>
               </div>
              </div></li>
            </ol></li>
           <li>Select the input and output definition files and click the <strong>Next</strong> button. The mapper importer then loads the selected files and checks to see if any object names need to be changed; for example, if one or more names conflict with Mapper Language keywords, or if a message name begins with a number. If a message name begins with a number, the dollar sign (<code>$</code>) character is added to the beginning of the name to make it legal.</li>
           <li><p>If modifications are made, the <strong>Message Components Name Changes</strong> dialog is displayed identifying each change:</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/133163411/133163417.png" data-image-src="attachments/133163411/133163417.png" data-unresolved-comment-count="0" data-linked-resource-id="133163417" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="MapperChanges.png" data-base-url="https://docs.rhapsody.health" data-linked-resource-content-type="image/png" data-linked-resource-container-id="133163411" data-linked-resource-container-version="1"></span></p></li>
           <li><p>Select the <strong>Details</strong> button to display further information relating to the object names that were changed, and why the change was made:</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/133163411/133163416.png" data-image-src="attachments/133163411/133163416.png" data-unresolved-comment-count="0" data-linked-resource-id="133163416" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="MapperChanges1.png" data-base-url="https://docs.rhapsody.health" data-linked-resource-content-type="image/png" data-linked-resource-container-id="133163411" data-linked-resource-container-version="1"></span></p><p>Alternatively, select the <strong>Next</strong> button to continue creating the mapping definition.</p></li>
           <li><p>The <strong>Message Selection</strong> dialog is displayed:</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/133163411/133163413.png" data-image-src="attachments/133163411/133163413.png" data-unresolved-comment-count="0" data-linked-resource-id="133163413" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="MessageSelection.png" data-base-url="https://docs.rhapsody.health" data-linked-resource-content-type="image/png" data-linked-resource-container-id="133163411" data-linked-resource-container-version="1"></span></p><p>The <strong>Message Selection</strong> dialog lists all root messages in the specified message definitions.</p></li>
           <li><p>Select the input and output message structure to be mapped, and select the <strong>Finish</strong> button. The Mapper then creates an empty mapping definition between the two files:</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/133163411/133163418.png" data-image-src="attachments/133163411/133163418.png" data-unresolved-comment-count="0" data-linked-resource-id="133163418" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="MapDesigner.png" data-base-url="https://docs.rhapsody.health" data-linked-resource-content-type="image/png" data-linked-resource-container-id="133163411" data-linked-resource-container-version="1"></span></p><p>The new mapping is automatically named <code>Main&lt;MSG&gt;</code>, where <code>MSG</code> is the type of the message/document as listed in this dialog, for example <code>MainACK</code>. This name cannot be changed. The two root messages selected are used as parameters to the new main map. The parameters are named <code>in</code> and <code>out</code> by default and can be changed by right clicking the map in the workspace and, from its shortcut menu, selecting <strong>Properties</strong>.</p></li>
          </ol> 
         </div>
        </div>
        <p></p>
       </div>
      </div>
      <h2 id="ConvertingSimilarMessageFormats-ConfiguringtheMapperFilter">Configuring the Mapper Filter</h2>
      <p>To configure the Mapper filter for this scenario.</p>
      <ol>
       <li>Click the <strong>Browse</strong> (...) button next to the <strong>Mapper Definition File</strong> property.</li>
       <li>Select the MDF definition file that was defined using Map Designer. The remaining options can be left at their default values for this example. The completed configuration is shown in the following screenshot:</li>
      </ol>
      <p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/133163014/133163016.png" data-image-src="attachments/133163014/133163016.png" data-unresolved-comment-count="0" data-linked-resource-id="133163016" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="MapperConfig.PNG" data-base-url="https://docs.rhapsody.health" data-linked-resource-content-type="image/png" data-linked-resource-container-id="133163014" data-linked-resource-container-version="1"></span></p>
      <p>Once all the routes and communication points are checked in and started, any input HL7 v2.4 <code>ADT</code> messages will be converted to HL7 v2.5 <code>ADT</code> at the output system.</p>
      <p> </p> 
     </div>  
    </div> 
   </div>  
  </div>   
 </body>
</html>