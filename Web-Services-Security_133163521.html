<!doctype html>
<html>
 <head> 
  <title>Web Services Security</title> 
  <link rel="stylesheet" href="styles/site.css" type="text/css"> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
  <link rel="stylesheet" href="styles/icons.css" type="text/css">
  <script src="js/jquery.min.js"></script>
  <script src="tree/collapsibleTreeMenu.js"></script>
  <link href="tree/collapsibleTreeMenu.css" rel="stylesheet" type="text/css">
 </head> 
 <body class="theme-default aui-theme-default"> 
  <div id="page"> 
   <div id="main" class="aui-page-panel"> 
    <div id="main-header"> 
     <div id="breadcrumb-section"> 
      <ol id="breadcrumbs">  
       <li> <span><a href="Rhapsody-Integration-Engine-6.5_133160975.html">Rhapsody Integration Engine 6.5</a></span> </li> 
       <li> <span><a href="Developing-Rhapsody_133161055.html">Developing Rhapsody</a></span> </li> 
       <li> <span><a href="Rhapsody-Objects_133161790.html">Rhapsody Objects</a></span> </li> 
       <li> <span><a href="Web-Services_133163490.html">Web Services</a></span> </li> 
      </ol> 
     </div> 
     <h1 id="title-heading" class="pagetitle"> <span id="title-text">Web Services Security</span> </h1> 
    </div> 
    <div id="content" class="view">  
     <div id="main-content" class="wiki-content group"> 
      <p>In the context of Web services there are three areas of security that must be considered — Authentication, Integrity and Confidentiality.</p>
      <p><strong>Authentication</strong> is used to validate the identity of the initiator and verify that they have sufficient privileges for the operation they are calling. The authentication process can range from basic HTTP authentication, to HTTPS client authentication, to various WS-Security tokens that are included in the SOAP message.</p>
      <p><strong>Integrity</strong> assertions are used to verify that the message has not been altered by a third-party during transmission. It allows Rhapsody (as the Web services producer) to check that the request message is the same as was generated by the initiator, and allows the initiator to verify that Rhapsody's response is likewise unchanged. Two available mechanisms for making these guarantees are the use of TLS (HTTPS) connections or XML signatures.</p>
      <p><strong>Confidentiality</strong> assertions are used to encrypt parts of the message so they cannot be viewed by a third-party during transmission. The encryption keys are selected so that messages can only be decrypted by the intended recipient of the message. Two available confidentiality mechanisms are the use of TLS (HTTPS) connections and XML encryption.</p>
      <p>Configuring WS-Security for Web services hosted by Rhapsody involves setting options for how authentication, integrity and confidentially are performed (if at all). The configured values affect both — how Rhapsody implements the security functionality, and what is advertised to callers in the WSDL policy elements.</p>
      <h2 id="WebServicesSecurity-ConfiguringWebServicesSecurity">Configuring Web Services Security</h2>
      <p>The security configuration process involves the following:</p>
      <ul>
       <li>Selecting a security binding</li>
       <li>Selecting an authentication mode</li>
       <li>Configuring the detailed security options</li>
      </ul>
      <h3 id="WebServicesSecurity-SecurityBindings">Security Bindings</h3>
      <p>The security bindings can be thought of as a mechanism that defines how the encryption and signing keys are determined, and the style of encryption and signing that is used.</p>
      <p>When <strong>No Security Binding</strong> is selected, no mechanism is defined within the Web service definition for securely exchanging keys. However, this does not prevent the Web service from only being available over HTTPS and some forms of authentication being used. Consequently a Web service may have no security binding, but can still be very secure.</p>
      <p><strong>Transport Security Binding</strong> is used when confidentiality and integrity of the transmitted messages is guaranteed by the transport mechanism, rather than by the signing and encryption performed within the message itself. The Web service <strong>must</strong> use HTTPS when using the transport security binding. In practice, using either the transport security binding or no security binding when HTTPS is in use, is very similar. The only difference is that the transport security binding allows a few minor WS-Security options to be enabled (for example, requiring a timestamp to be included in the incoming requests), which is not allowed otherwise.</p>
      <p></p>
      <p><strong>Symmetric Security Binding</strong> is used when the Web service has a public certificate and associated private key, but the clients calling that Web service do not necessarily have one. This binding uses XML signing and encryption to protect the messages. A session key is generated by the client when calling such a Web service and is used to perform the signing and encryption. The generated session key is then encrypted using the Web service's certificate, and included in the transmitted message.</p>
      <p><strong>Asymmetric Security Binding</strong> is used when both the Web service and the client have public certificates and associated private keys. This is very similar to the symmetric security binding, but the message is signed using the client's private key, and a reference to their security (or in some cases the certificate itself) is included in the message.</p>
      <h3 id="WebServicesSecurity-AuthenticationModes">Authentication Modes</h3>
      <p>Rhapsody provides five different authentication modes. Three of them are available regardless of which security binding is used, one is available only when HTTPS is in use (HTTPS client authentication), and the final one can only be used when using the asymmetric security binding (X509 token authentication). If any authentication is performed, the administrator must configure which authenticated users are allowed access to the Web service.</p>
      <p>The <strong>No Authentication</strong> mode <strong>does not</strong> authenticate the caller at all. This should only be used in limited circumstances, generally when some other authentication or security mechanism is in place that the Web service is not aware of (for example, IPSec).</p>
      <p><strong>Basic HTTP Authentication</strong> allows authentication to be performed using the HTTP basic access authentication mechanism, as defined by HTTP. This is a simple authentication mechanism supported by most clients. It is important to note that when using basic HTTP authentication, the password is transmitted in a form that is trivial to revert back to its original form. Consequently in most cases basic HTTP authentication should only be used if the Web service is using TLS (HTTPS).</p>
      <p>The <strong>Username Token Authentication</strong> mode involves the use of a special WS-Security token that is included in the request SOAP message. This token provides the name of the user making the request and their password. The password can be provided in either text or digest form. The form used is determined by the client making the request, but it is recommended that only the plaintext version be used either with an HTTPS connection or when using the asymmetric or symmetric security bindings, so it can be encrypted.</p>
      <p>The <strong>HTTPS Client Authentication</strong> mode is only available when using an HTTPS connector and performs authentication using the client certificate provided when the connection is established. The certificate used when establishing the connection is compared against the certificates of the authenticated users for this service to identify which user is making the request. Consequently the authentication is performed at the transport level, rather than at the message level.</p>
      <p>The <strong>X509 Token Authentication</strong> mode is only available when using the asymmetric security binding. It authenticates the client by examining the signature included in the SOAP message and matches it against the certificates of the authenticated users for the service.</p>
      <p></p>
      <h3 id="WebServicesSecurity-UsernameTokenAuthenticationandDigestPasswords">Username Token Authentication and Digest Passwords</h3>
      <p>When Username Token Authentication is in use, there are two options available for how the password is transmitted. Firstly, the token can contain a plain text password. As the password is out in the open, so to speak, this mechanism should only be used when using either HTTPS, or the symmetric or asymmetric security bindings (as these options mean that the entire token is encrypted and so cannot be intercepted).</p>
      <p>The second option is to include a password digest in the username token, instead of the plaintext password. When digest authentication is performed, the client includes the username and three additional elements — a timestamp, a randomly generated nonce and the calculated digest. The digest is generated by combining and hashing together the original password (or password equivalent), the timestamp and the nonce. Internally, Rhapsody tracks the use of the timestamps and nonces to ensure that the timestamps are valid, and that the same timestamp/nonce pair is not reused (to prevent replay attacks).</p>
      <p>A complication arises when the Rhapsody Web Services User Store has been configured to store hashed passwords instead of encrypted passwords. If encrypted passwords are used, then Rhapsody can authenticate the digest request by performing the same digest operation as the client using the user's password and verifying that they match. However, if hashed passwords are stored in the user store, there is no way for Rhapsody to retrieve the original password in order to perform the authentication.</p>
      <p>Consequently, if Username Token Digest Authentication is being used, and Rhapsody is configured to store hashed passwords, the 'password equivalent' used to perform the digest operation is not the original plaintext password. It is instead generated by performing an SHA-1 hash of the UTF-8 encoded password, and then Base64 encoding the hash.</p>
      <h2 id="WebServicesSecurity-RecommendedSecurityConfigurations">Recommended Security Configurations</h2>
      <p>Effectively, the difference is that the transport security binding (HTTPS) secures (and can authenticate) the message at the transport level, that is, everything sent between the client and the server is encrypted and signed. The asymmetric and symmetric security bindings sign and encrypt individual messages (or normally, parts of the messages) and can operate over an unencrypted transport.</p>
      <p>As using an HTTPS connection is both simpler to configure and significantly more preferred than using the symmetric or asymmetric security bindings, this is the recommended approach whenever possible. In general, the asymmetric and symmetric security bindings should not be used unless either the client or the server do not directly connect to each other (that is, the client connects to some bridging system, which then routes the message onwards to the server), or there is some other requirement to use a non-secure transport connection.</p>
      <h3 id="WebServicesSecurity-TransportSecurityBindingwithHTTPSClientAuthentication">Transport Security Binding with HTTPS Client Authentication</h3>
      <p>The preferred configuration is to use the transport security binding (which implies an HTTPS connection) and use HTTPS client certificate authentication. This combination means that confidentiality, integrity and authentication are all performed at the transport layer. However, this approach does mean that all the clients require an HTTPS client certificate, which they must provide when establishing the connection.</p>
      <p></p>
      <h3 id="WebServicesSecurity-TransportSecurityBindingwithUsernameToken/BasicHTTPAuthentication">Transport Security Binding with Username Token/Basic HTTP Authentication</h3>
      <p>If the preferred configuration of the transport security binding and HTTPS client certificate authentication cannot be used, then it is recommended that either basic HTTP or username token authentication be used instead. The transport security binding is still used meaning that all connections are made over HTTPS (providing confidentiality and integrity of messages). Authentication is then performed using either basic HTTP or username token authentication as preferred. The effectively plaintext passwords sent by basic HTTP authentication and username tokens with the plaintext option are not an issue as the secure connection means that they cannot be read by third parties attempting to intercept the message.</p>
      <p> </p> 
     </div> 
    </div> 
   </div>  
  </div>   
 </body>
</html>