<!doctype html>
<html>
 <head> 
  <title>Always Acknowledging Messages</title> 
  <link rel="stylesheet" href="styles/site.css" type="text/css"> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
  <link rel="stylesheet" href="styles/icons.css" type="text/css">
  <script src="js/jquery.min.js"></script>
  <script src="tree/collapsibleTreeMenu.js"></script>
  <link href="tree/collapsibleTreeMenu.css" rel="stylesheet" type="text/css">
 </head> 
 <body class="theme-default aui-theme-default"> 
  <div id="page"> 
   <div id="main" class="aui-page-panel"> 
    <div id="main-header"> 
     <div id="breadcrumb-section"> 
      <ol id="breadcrumbs">  
       <li> <span><a href="Rhapsody-Integration-Engine-6.5_133160975.html">Rhapsody Integration Engine 6.5</a></span> </li> 
       <li> <span><a href="Developing-Rhapsody_133161055.html">Developing Rhapsody</a></span> </li> 
       <li> <span><a href="Rhapsody-Objects_133161790.html">Rhapsody Objects</a></span> </li> 
       <li> <span><a href="Rhapsody-Components_133161994.html">Rhapsody Components</a></span> </li> 
       <li> <span><a href="Filters_133162681.html">Filters</a></span> </li> 
       <li> <span><a href="Filter-Types_133162712.html">Filter Types</a></span> </li> 
       <li> <span><a href="HL7-Filters_133163076.html">HL7 Filters</a></span> </li> 
       <li> <span><a href="HL7-Acknowledgement-Generation_133163288.html">HL7 Acknowledgement Generation</a></span> </li> 
       <li> <span><a href="Generating-HL7-Acknowledgements_133163292.html">Generating HL7 Acknowledgements</a></span> </li> 
      </ol> 
     </div> 
     <h1 id="title-heading" class="pagetitle"> <span id="title-text">Always Acknowledging Messages</span> </h1> 
    </div> 
    <div id="content" class="view">  
     <div id="main-content" class="wiki-content group"> 
      <p>This scenario involves successfully acknowledging every message received, and is frequently used when Rhapsody is being used to broadcast messages received from one system to multiple other systems. The messages received by Rhapsody are immediately acknowledged and forwarded onto other systems.</p>
      <h2 id="AlwaysAcknowledgingMessages-HL7MessageMatching">HL7 Message Matching</h2>
      <p>In HL7, acknowledgments are matched to the original message using message control IDs. These message control IDs are semi-unique identifiers used to identify messages. All HL7 messages contain a message control ID in field 10 of the MSH segment (<code>MSH/MessageControlId</code>). An HL7 acknowledgment for this message contains the same message control ID in field 2 of the MSA segment (<code>MSA/MessageControlId</code>).</p>
      <p>As these message control IDs are only semi-unique (generally per generating system), they are often combined with information about the sending system to avoid confusion with messages generated by a separate system. Consequently, the sender fields (<code>MSH/SendingApplication</code> and <code>MSH/SendingFacility</code>) are often used in conjunction with the control ID field, and an acknowledgment will need to include this information in the receiver fields (<code>MSH/ReceivingApplication</code> and <code>MSH/ReceivingFacility</code>).</p>
      <h2 id="AlwaysAcknowledgingMessages-ConfiguringtheFilter">Configuring the Filter</h2>
      <p>There are two main configuration properties that need to be looked at when using an <strong>HL7 Acknowledgment Generation</strong> filter to always acknowledge messages: Acknowledgment Mode, and Message Definition.</p>
      <ul>
       <li><strong>Acknowledgment Mode</strong> - to set the filter to always create a positive acknowledgment (without validating the message), set the Acknowledgement Mode to <code>Always ACK (AA)</code>.</li>
      </ul>
      <ul>
       <li><strong>Message Definition</strong> - the message definition property needs to be set to an EDI message definition containing the structure of the incoming messages. The definition can be generated using the EDI Message Designer application, and using the Library Wizard to import the appropriate HL7 messages. A message definition is required by this filter so that it can parse the incoming message, and copy across the appropriate fields.</li>
      </ul>
      <p>An example of the configuration properties is shown in the following screenshot:</p>
      <p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/133163293/133163294.png" data-image-src="attachments/133163293/133163294.png" data-unresolved-comment-count="0" data-linked-resource-id="133163294" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="ackGenerationFilterHt-1.png" data-base-url="https://docs.rhapsody.health" data-linked-resource-content-type="image/png" data-linked-resource-container-id="133163293" data-linked-resource-container-version="1"></span></p>
      <h3 id="AlwaysAcknowledgingMessages-HL7Versions">HL7 Versions</h3>
      <p>By default, the <strong>HL7 Acknowledgment Generation</strong> filter generates acknowledgments with the same HL7 version as the original message. However, this can be set to a fixed version using the <strong>HL7 Version</strong> property of the filter. It can be set to <code>Same as input message</code> (the default), or be set to any specific HL7 version.</p>
      <p> </p> 
     </div>  
    </div> 
   </div>  
  </div>   
 </body>
</html>