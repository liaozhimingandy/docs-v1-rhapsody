<!doctype html>
<html>
 <head> 
  <title>Adding a Rule</title> 
  <link rel="stylesheet" href="styles/site.css" type="text/css"> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
  <link rel="stylesheet" href="styles/icons.css" type="text/css">
  <script src="js/jquery.min.js"></script>
  <script src="tree/collapsibleTreeMenu.js"></script>
  <link href="tree/collapsibleTreeMenu.css" rel="stylesheet" type="text/css">
 </head> 
 <body class="theme-default aui-theme-default"> 
  <div id="page"> 
   <div id="main" class="aui-page-panel"> 
    <div id="main-header"> 
     <div id="breadcrumb-section"> 
      <ol id="breadcrumbs">  
       <li> <span><a href="Rhapsody-Integration-Engine-6.5_133160975.html">Rhapsody Integration Engine 6.5</a></span> </li> 
       <li> <span><a href="Developing-Rhapsody_133161055.html">Developing Rhapsody</a></span> </li> 
       <li> <span><a href="Rhapsody-Objects_133161790.html">Rhapsody Objects</a></span> </li> 
       <li> <span><a href="Rhapsody-Components_133161994.html">Rhapsody Components</a></span> </li> 
       <li> <span><a href="Filters_133162681.html">Filters</a></span> </li> 
       <li> <span><a href="Filter-Types_133162712.html">Filter Types</a></span> </li> 
       <li> <span><a href="HL7-Filters_133163076.html">HL7 Filters</a></span> </li> 
       <li> <span><a href="HL7-Message-Modifier_133163077.html">HL7 Message Modifier</a></span> </li> 
       <li> <span><a href="Configure_133163111.html">Configure</a></span> </li> 
      </ol> 
     </div> 
     <h1 id="title-heading" class="pagetitle"> <span id="title-text">Adding a Rule</span> </h1> 
    </div> 
    <div id="content" class="view">  
     <div id="main-content" class="wiki-content group"> 
      <p> <map id="gliffy-map-133163118-7642" name="gliffy-map-133163118-7642"></map> </p>
      <table width="100%" class="gliffy-macro-table"> 
       <tbody>
        <tr> 
         <td> 
          <table class="gliffy-macro-inner-table"> 
           <caption align="bottom"> 
           </caption> 
           <tbody>
            <tr> 
             <td> <img style="border: none; width: 602px;" usemap="#gliffy-map-133163118-7642" src="attachments/133163114/133163117.png" alt="" class="gliffy-macro-image"> </td> 
            </tr> 
           </tbody>
          </table> </td> 
        </tr> 
       </tbody>
      </table> 
      <p></p>
      <p>After adding a segment to a group, you can start applying a rule to change your selected segment by adding statements.</p>
      <p> <map id="gliffy-map-133163116-162" name="gliffy-map-133163116-162"></map> </p>
      <table width="100%" class="gliffy-macro-table"> 
       <tbody>
        <tr> 
         <td> 
          <table class="gliffy-macro-inner-table"> 
           <caption align="bottom"> 
           </caption> 
           <tbody>
            <tr> 
             <td> <img style="border: none; width: 1228px;" usemap="#gliffy-map-133163116-162" src="attachments/133163114/133163115.png" alt="" class="gliffy-macro-image"> </td> 
            </tr> 
           </tbody>
          </table> </td> 
        </tr> 
       </tbody>
      </table> 
      <p></p>
      <div class="table-wrap">
       <table class="confluenceTable">
        <tbody>
         <tr>
          <th class="confluenceTh"><p>Sections</p></th>
          <th class="confluenceTh"><p>Description</p></th>
         </tr>
         <tr>
          <td class="confluenceTd"><p>Navigation Panel</p></td>
          <td class="confluenceTd"><p><span>Enables</span> you to view the segments marked for modification and select a segment you wish to modify using change groups.</p></td>
         </tr>
         <tr>
          <td class="confluenceTd"><p>Change Group Name</p></td>
          <td class="confluenceTd"><p><span>Enables</span> you to rename or delete Change Groups.</p></td>
         </tr>
         <tr>
          <td class="confluenceTd"><p>Sample Segment Panel</p></td>
          <td class="confluenceTd"><p>Enables you to test the changes you have applied to a segment on a sample segment.</p></td>
         </tr>
         <tr>
          <td class="confluenceTd"><p>Result Panel</p></td>
          <td class="confluenceTd"><p>Displays a preview of your changes to the segment.</p></td>
         </tr>
         <tr>
          <td class="confluenceTd"><p>Quick Edit Link</p></td>
          <td class="confluenceTd"><p><span>Enables</span> you to make changes to the sample segment for testing purposes.</p>
           <div class="confluence-information-macro confluence-information-macro-note">
            <span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span>
            <div class="confluence-information-macro-body">
             <p>Any changes to the sample segment will not affect the loaded sample message displayed in the <strong>Sample Input Message</strong> panel or in the <strong>All Changes</strong> view.</p>
            </div>
           </div></td>
         </tr>
         <tr>
          <td class="confluenceTd"><p>Rule Panel</p></td>
          <td class="confluenceTd"><p>Displays the statements (conditions and actions) added by the user.</p></td>
         </tr>
         <tr>
          <td class="confluenceTd"><p>Changes Bar</p></td>
          <td class="confluenceTd"><p><span>Enables</span> you to add new conditions and actions.</p></td>
         </tr>
        </tbody>
       </table>
      </div>
      <div class="confluence-information-macro confluence-information-macro-tip">
       <span class="aui-icon aui-icon-small aui-iconfont-approve confluence-information-macro-icon"></span>
       <div class="confluence-information-macro-body">
        <p>Hover your mouse over a field in the message to display a tooltip with the field number.</p>
       </div>
      </div>
      <div class="confluence-information-macro confluence-information-macro-information">
       <span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span>
       <div class="confluence-information-macro-body">
        <p>It is recommended you refer to <a href="Concepts_133163267.html">Concepts</a> to familiarize yourself with the concepts that relate to the HL7 Message Modifier filter.</p>
       </div>
      </div>
      <h2 id="AddingaRule-Rules">Rules</h2>
      <p>A rule consists of one or more conditional and action statements. Refer to <a href="Standard-Statements_133163194.html">Standard Statements</a> for details.</p>
      <p>For example, to replace the field MSH.12 in a message with the value 2.4 if it contains the value 2.5 in the following HL7 message, you would use the following rule consisting of two statements:</p>
      <div class="preformatted panel" style="border-width: 1px;">
       <div class="preformattedContent panelContent"> 
        <pre>1.  If Field MSH.12 Equals 2.5
2.  then Set Field MSH.12 To Value 2.4 
</pre> 
       </div>
      </div>
      <p>Therefore, the following message:</p>
      <div class="preformatted panel" style="border-width: 1px;">
       <div class="preformattedContent panelContent"> 
        <pre>MSH|^~\&amp;|MIC|820|MEDMADT820|820|20100831102129||ORU^R01|8327689|P|2.5
</pre> 
       </div>
      </div>
      <p>would be transformed to:</p>
      <div class="preformatted panel" style="border-width: 1px;">
       <div class="preformattedContent panelContent"> 
        <pre>MSH|^~\&amp;|MIC|820|MEDMADT820|820|20100831102129||ORU^R01|8327689|P|2.4
</pre> 
       </div>
      </div>
      <p>To construct a rule, you can perform the following actions:</p>
      <ul>
       <li><a href="#AddingaRule-AddingaStatement">Adding a Statement</a></li>
       <li><a href="#AddingaRule-AddingaStatementtoaCondition">Adding a Statement to a Condition</a></li>
       <li><a href="#AddingaRule-DeletingaStatement">Deleting a Statement</a></li>
       <li><a href="#AddingaRule-EditingaStatement">Editing a Statement</a></li>
       <li><a href="#AddingaRule-MovingaStatement">Moving a Statement</a></li>
       <li><a href="#AddingaRule-TestingaRule">Testing a Rule</a></li>
      </ul>
      <h2 id="AddingaRule-AddingaStatement">Adding a Statement</h2>
      <h3 id="AddingaRule-AddinganAction">Adding an Action</h3>
      <p>To add an (unconditional) action statement to be performed on fields within a segment:</p>
      <ol>
       <li>Select the segment in the message you want to modify. Refer to <a href="Adding-a-Segment_133163222.html">Selecting a Segment</a> for details.</li>
       <li><p>Click the <strong>Action</strong> link in the <strong>Changes Bar</strong> to display a blank form to add an action:</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/133163114/133163123.png" data-image-src="attachments/133163114/133163123.png" data-unresolved-comment-count="0" data-linked-resource-id="133163123" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Adding an Action.png" data-base-url="https://docs.rhapsody.health" data-linked-resource-content-type="image/png" data-linked-resource-container-id="133163114" data-linked-resource-container-version="1"></span></p></li>
       <li><p>Fill out the form.</p>
        <div class="confluence-information-macro confluence-information-macro-information">
         <span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span>
         <div class="confluence-information-macro-body">
          <p>Refer to <a href="Standard-Statements_133163194.html">Standard Statements</a> for details on how to construct standard statements.</p>
         </div>
        </div></li>
       <li>Click the <strong>Ok</strong> link to accept the changes or <strong>Cancel</strong> to discard them.</li>
       <li>Use the <strong>Sample Message Panel</strong> to test your change. Refer to <a href="#AddingaRule-TestingaRule">Testing a Rule</a> for details.</li>
      </ol>
      <div class="confluence-information-macro confluence-information-macro-information">
       <span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span>
       <div class="confluence-information-macro-body">
        <p>You can also add an action statement by clicking a field in a sample message in the <strong>Sample Message</strong> panel.</p>
       </div>
      </div>
      <h3 id="AddingaRule-AddingaCondition">Adding a Condition</h3>
      <p>To add a new blank condition to the changes list:</p>
      <ol>
       <li>Select the segment in the message you want to modify. Refer to <a href="Adding-a-Segment_133163222.html">Selecting a Segment</a> for details.</li>
       <li><p>Click the <strong>Add Condition</strong> link in the <strong>Changes Bar</strong> to display a blank form to add a condition:</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/133163114/133163124.png" data-image-src="attachments/133163114/133163124.png" data-unresolved-comment-count="0" data-linked-resource-id="133163124" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Adding a Condition.png" data-base-url="https://docs.rhapsody.health" data-linked-resource-content-type="image/png" data-linked-resource-container-id="133163114" data-linked-resource-container-version="1"></span></p></li>
       <li><p>Fill out the form.</p>
        <div class="confluence-information-macro confluence-information-macro-information">
         <span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span>
         <div class="confluence-information-macro-body">
          <p>Refer to <a href="Standard-Statements_133163194.html">Standard Statements</a> for details on how to construct standard statements.</p>
         </div>
        </div></li>
       <li>After you have added a new condition, add a new rule statement to the condition. Refer to <a href="#AddingaRule-AddingaStatementtoaCondition">Adding a Statement to a Condition</a> for details.</li>
      </ol>
      <h2 id="AddingaRule-AddingaStatementtoaCondition">Adding a Statement to a Condition</h2>
      <p>To add a new rules statement to an existing condition:</p>
      <ol>
       <li>Select the segment in the message you want to modify. Refer to <a href="Adding-a-Segment_133163222.html">Selecting a Segment</a> for details.</li>
       <li>Select an existing condition to which you want to add an action or condition.</li>
       <li>In the <strong>Changes Bar</strong>, click one of the following links:
        <ul>
         <li><a href="#AddingaRule-AddinganActiontoCondition">Action</a></li>
         <li><a href="#AddingaRule-AddingaConditiontoaCondition">Condition</a></li>
         <li><a href="#AddingaRule-AddinganOtherwiseConditiontoaCondition">Otherwise</a></li>
         <li><a href="#AddingaRule-AddinganOtherwiseIfConditiontoaCondition">Otherwise If</a></li>
        </ul></li>
      </ol>
      <div class="confluence-information-macro confluence-information-macro-information">
       <span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span>
       <div class="confluence-information-macro-body">
        <p>Refer to <a href="Standard-Statements_133163194.html">Standard Statements</a> for details on how to construct standard statements.</p>
       </div>
      </div>
      <h3 id="AddingaRule-AddinganActiontoCondition">Adding an Action to Condition</h3>
      <p>To add an action to a condition:</p>
      <ol>
       <li>Select the condition which you wish the new action to depend on.</li>
       <li>Click the <strong>Action</strong> link in the <strong>Changes Bar</strong>. Refer to <a href="#AddingaRule-AddinganAction">Adding an Action</a> for details.</li>
      </ol>
      <h3 id="AddingaRule-AddingaConditiontoaCondition">Adding a Condition to a Condition</h3>
      <p>To create a nested condition:</p>
      <ol>
       <li>Select the condition (If, Otherwise If or Otherwise) which you wish the new condition to depend on.</li>
       <li>Click the <strong>Condition</strong> link in the <strong>Changes Bar</strong>. Refer to <a href="#AddingaRule-AddingaCondition">Adding a Condition</a> for details.</li>
       <li>Select the newly created condition and add an action to it. Refer to <a href="#AddingaRule-AddinganAction">Adding an Action</a> for details.</li>
      </ol>
      <h3 id="AddingaRule-AddinganOtherwiseConditiontoaCondition">Adding an Otherwise Condition to a Condition</h3>
      <p>To add a new Otherwise condition:</p>
      <ol>
       <li>Select the condition which you wish the Otherwise condition to follow.</li>
       <li>Click the <strong>Otherwise</strong> link in the <strong>Changes Bar</strong>.</li>
       <li>Select the newly created Otherwise condition and add an action to it. Refer to <a href="#AddingaRule-AddinganAction">Adding an Action</a> for details.</li>
      </ol>
      <h3 id="AddingaRule-AddinganOtherwiseIfConditiontoaCondition">Adding an Otherwise If Condition to a Condition</h3>
      <ol>
       <li>Select the condition which you wish the Otherwise If condition to follow.</li>
       <li>Click the <strong>Otherwise If</strong> link in the <strong>Changes Bar</strong>. Refer to <a href="#AddingaRule-AddingaCondition">Adding a Condition</a> for further instructions.</li>
       <li>Select the newly created Otherwise If condition and add an action to it. Refer to <a href="#AddingaRule-AddinganAction">Adding an Action</a> for details.</li>
      </ol>
      <h2 id="AddingaRule-DeletingaStatement">Deleting a Statement</h2>
      <h3 id="AddingaRule-DeletingActions">Deleting Actions</h3>
      <p>To delete an action:</p>
      <ol>
       <li>Select&nbsp;the <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/133163114/133163122.gif" data-image-src="attachments/133163114/133163122.gif" data-unresolved-comment-count="0" data-linked-resource-id="133163122" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="remove.gif" data-base-url="https://docs.rhapsody.health" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="133163114" data-linked-resource-container-version="1"></span> icon which appears when you hover the mouse over the statement to display the <strong>Delete Action</strong> confirmation dialog.</li>
       <li>Select&nbsp;the <strong>Delete</strong> button to proceed with the deletion, or the <strong>Cancel</strong> link to abort.</li>
      </ol>
      <h3 id="AddingaRule-DeletingConditions">Deleting Conditions</h3>
      <p>To delete a condition:</p>
      <ol>
       <li>Select&nbsp;the <span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/133163114/133163122.gif" data-image-src="attachments/133163114/133163122.gif" data-unresolved-comment-count="0" data-linked-resource-id="133163122" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="remove.gif" data-base-url="https://docs.rhapsody.health" data-linked-resource-content-type="image/gif" data-linked-resource-container-id="133163114" data-linked-resource-container-version="1"></span> icon which appears when you hover the mouse over the statement to display the <strong>Delete Condition</strong> confirmation dialog.</li>
       <li><p>If you are deleting a parent conditional statement and want to delete its children statements as well, check the <strong>Delete Nested Actions and Conditions&nbsp;</strong>checkbox.</p>
        <div class="confluence-information-macro confluence-information-macro-note">
         <span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span>
         <div class="confluence-information-macro-body">
          <p>Consequential conditional statements are not deleted (unless explicitly selected) - the first consequential conditional statement becomes the parent statement.</p>
         </div>
        </div></li>
       <li>Select&nbsp;the <strong>Delete</strong> button to proceed with the deletion, or the <strong>Cancel</strong> link to abort.</li>
      </ol>
      <h2 id="AddingaRule-EditingaStatement">Editing a Statement</h2>
      <p>To enter edit mode, click the action or condition.</p>
      <div class="confluence-information-macro confluence-information-macro-information">
       <span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span>
       <div class="confluence-information-macro-body">
        <p>When you are editing an action or condition, you cannot edit a second action or condition until you save or cancel the current changes. Drag-and-drop is also disabled.</p>
       </div>
      </div>
      <h2 id="AddingaRule-MovingaStatement">Moving a Statement</h2>
      <p>You can drag-and-drop statements by using the <strong>Drag indicator</strong>&nbsp;icon&nbsp;<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/133163114/133163121.png" data-image-src="attachments/133163114/133163121.png" data-unresolved-comment-count="0" data-linked-resource-id="133163121" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="thumbgrip.png" data-base-url="https://docs.rhapsody.health" data-linked-resource-content-type="image/png" data-linked-resource-container-id="133163114" data-linked-resource-container-version="1"></span>.</p>
      <p>The following restrictions apply:</p>
      <ul>
       <li>You can drag action statements whether they are located to be standalone statements or child statements of conditional statements.</li>
       <li>Conditional statements can only be moved with all of their children statements and consequential statements.</li>
       <li>When you are moving an action or a condition set to a condition, you are limited to a nesting level of two.</li>
      </ul>
      <h2 id="AddingaRule-TestingaRule">Testing a Rule</h2>
      <p>As you add statements in the <strong>Rules Panel</strong>, the <strong>Sample Result Panel</strong> immediately shows a preview of the changes which are highlighted. To test your change, you can edit the values directly in the sample message in the <strong>Sample Message Panel</strong> by clicking the <strong>Quick Edit</strong> link.</p>
      <p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/133163114/133163119.png" data-image-src="attachments/133163114/133163119.png" data-unresolved-comment-count="0" data-linked-resource-id="133163119" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="SampleMessagePanel.png" data-base-url="https://docs.rhapsody.health" data-linked-resource-content-type="image/png" data-linked-resource-container-id="133163114" data-linked-resource-container-version="1"></span></p>
      <div class="confluence-information-macro confluence-information-macro-warning">
       <span class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon"></span>
       <div class="confluence-information-macro-body">
        <p>You must thoroughly test all your rules to ensure they perform the changes you envision.</p>
       </div>
      </div>
      <div class="confluence-information-macro confluence-information-macro-note">
       <span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span>
       <div class="confluence-information-macro-body">
        <p>Any references to other segments (in conditions) are always treated on the <a href="Adding-a-Segment_133163222.html">segment change page</a> as though they are not present in the message. For a more complete result, you can go back to the <a href="Adding-a-Group_133163250.html">change group page</a> and test a message which has all the referenced segments in it. If you want to see how the results would change if a referenced segment is not found, you can choose a sample message with the required segments missing or go back to the <a href="Adding-a-Segment_133163222.html">segment change page</a> which acts as though all referenced segments are missing.</p>
       </div>
      </div>
      <p> </p> 
     </div>  
    </div> 
   </div>  
  </div>   
 </body>
</html>